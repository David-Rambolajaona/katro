(function(e){function t(t){for(var c,i,a=t[0],l=t[1],r=t[2],d=0,b=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&b.push(o[i][0]),o[i]=0;for(c in l)Object.prototype.hasOwnProperty.call(l,c)&&(e[c]=l[c]);_&&_(t);while(b.length)b.shift()();return n.push.apply(n,r||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],c=!0,a=1;a<s.length;a++){var l=s[a];0!==o[l]&&(c=!1)}c&&(n.splice(t--,1),e=i(i.s=s[0]))}return e}var c={},o={app:0},n=[];function i(t){if(c[t])return c[t].exports;var s=c[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=c,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)i.d(s,c,function(t){return e[t]}.bind(null,c));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/katro/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var r=0;r<a.length;r++)t(a[r]);var _=l;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0e3e":function(e,t,s){"use strict";s("2544")},1350:function(e,t,s){"use strict";s("eb19")},"24ea":function(e,t,s){"use strict";s("663f")},2544:function(e,t,s){},"2b07":function(e,t,s){},"36a4":function(e,t,s){"use strict";s("6c70")},4727:function(e,t,s){},"522d":function(e,t,s){"use strict";s("b945")},"56d7":function(e,t,s){"use strict";s.r(t);var c=s("7a23");const o={key:0,class:"loading-screen-home h-100 d-flex justify-content-center align-items-center"},n={class:""},i={class:""},a=Object(c["g"])("div",{class:"d-flex justify-content-center p-3"},[Object(c["g"])("span",{class:"spinner-border text-dark"})],-1),l=Object(c["g"])("div",{class:"text-center text-dark"},"Chargement",-1),r={key:1,id:"theapp",class:"h-100"};function _(e,t,s,_,d,b){const p=Object(c["B"])("KatroTitle"),m=Object(c["B"])("router-view");return"loading"==e.$store.state.token?(Object(c["u"])(),Object(c["f"])("div",o,[Object(c["g"])("div",n,[Object(c["g"])("div",i,[Object(c["i"])(p)]),a,l])])):(Object(c["u"])(),Object(c["f"])("div",r,[(Object(c["u"])(),Object(c["d"])(m,{key:e.$route.fullPath}))]))}var d=s("cee4");const b=e=>(Object(c["x"])("data-v-b5eb3c56"),e=e(),Object(c["v"])(),e),p={class:"d-flex justify-content-center py-1"},m=b(()=>Object(c["g"])("span",{class:"text-center title font-1"},"Katro",-1)),h=[m];function u(e,t,s,o,n,i){return Object(c["u"])(),Object(c["f"])("div",p,h)}var j={components:{},props:{},data(){return{}},methods:{}},O=(s("1350"),s("6b0d")),g=s.n(O);const f=g()(j,[["render",u],["__scopeId","data-v-b5eb3c56"]]);var k=f,y={name:"App",components:{KatroTitle:k},methods:{update_token(e,t,s,c){d["a"].get(this.$store.state.url_b+"/api/token",{params:{token:this.$store.state.token||"loading",fullpath:e,name:t,params:s,query:c}}).then(e=>{this.$store.dispatch("set_token",e.data.token)}).catch(e=>{console.log(e),this.$store.dispatch("set_token","error")}).finally(()=>{})}},created(){this.$store.dispatch("set_is_in_game",!1),this.$router.beforeEach((e,t,s)=>{if(this.$store.state.is_in_game){const e=window.confirm("Voulez-vous vraiment quitter cette page ?");e?s():s(!1)}else s()})},watch:{$route(e){this.update_token(e.fullPath,e.name,e.params,e.query)}}};s("36a4");const v=g()(y,[["render",_]]);var w=v,x=s("6605");const C={class:"container"},S={class:"row"},B={class:"col p-4"},E={class:"row"},z={class:"col d-flex justify-content-center"},I={class:""},A=Object(c["g"])("i",{class:"fa-solid fa-house"},null,-1),N=Object(c["h"])(" Multijoueur en local"),J=Object(c["g"])("i",{class:"fa-solid fa-robot"},null,-1),$=Object(c["h"])(" Contre l'ordinateur"),q=Object(c["g"])("i",{class:"fa-solid fa-globe"},null,-1),T=Object(c["h"])(" Multijoueur en ligne");function V(e,t,s,o,n,i){const a=Object(c["B"])("KatroTitle"),l=Object(c["B"])("router-link");return Object(c["u"])(),Object(c["f"])("div",C,[Object(c["g"])("div",S,[Object(c["g"])("div",B,[Object(c["i"])(a)])]),Object(c["g"])("div",E,[Object(c["g"])("div",z,[Object(c["g"])("div",I,[Object(c["i"])(l,{to:"/game/local",class:"btn btn-dark btn-block"},{default:Object(c["I"])(()=>[A,N]),_:1}),Object(c["i"])(l,{to:"/game/computer",class:"btn btn-dark btn-block disabled"},{default:Object(c["I"])(()=>[J,$]),_:1}),Object(c["i"])(l,{to:"/game/online",class:"btn btn-dark btn-block"},{default:Object(c["I"])(()=>[q,T]),_:1})])])])])}var P={components:{KatroTitle:k},data(){return{}},methods:{},mounted(){}};const L=g()(P,[["render",V]]);var R=L,M=[{path:"/",name:"Home",component:R}],U=M;const K=e=>(Object(c["x"])("data-v-1f07689f"),e=e(),Object(c["v"])(),e),G={class:"container h-100"},Q=K(()=>Object(c["g"])("div",{class:"row"},[Object(c["g"])("div",{class:"col"})],-1)),D={class:"board-container"},H={class:"row h-100"},W={class:"col h-100"};function F(e,t,s,o,n,i){const a=Object(c["B"])("Board");return Object(c["u"])(),Object(c["f"])("div",G,[Q,Object(c["g"])("div",D,[Object(c["g"])("div",H,[Object(c["g"])("div",W,[Object(c["i"])(a)])])])])}const X={class:"board h-100 d-flex flex-column justify-content-around",ref:"board"},Y={class:"board-side",ref:"board_side_1"},Z={key:0,class:"banner-winner"},ee={class:"m-0 text-center p-2 font-1"},te=["id","onClick"],se={class:"board-side"},ce=["id","onClick"];function oe(e,t,s,o,n,i){const a=Object(c["B"])("PebblesContainer");return Object(c["u"])(),Object(c["f"])("div",X,[Object(c["g"])("div",Y,["none"!=n.winner?(Object(c["u"])(),Object(c["f"])("div",Z,[Object(c["g"])("p",ee,Object(c["E"])(i.the_winner_is),1)])):Object(c["e"])("",!0),(Object(c["u"])(),Object(c["f"])(c["a"],null,Object(c["A"])(2,e=>Object(c["g"])("div",{key:e,class:"h-50 row board-row d-flex align-items-center"},[(Object(c["u"])(),Object(c["f"])(c["a"],null,Object(c["A"])(4,t=>Object(c["g"])("div",{key:t,class:"p-1",style:Object(c["q"])({width:n.hole_size,height:n.hole_size})},[Object(c["g"])("div",{class:Object(c["p"])(["hole h-100 w-100",{can_hover_opp:n.can_hover_opp&&"opp"==n.turn,focused_hole:n.focused_hole_moving=="opp"+(4*(e-1)+t)}]),id:"hole_opp"+(4*(e-1)+t),onClick:s=>i.click_hole("opp",4*(e-1)+t)},[Object(c["i"])(a,{v:n.hole_layer_1["opp"][4*(e-1)+t],top:0,left:0,size:100,zindex:10,layer:1},null,8,["v"]),Object(c["i"])(a,{v:n.delt_move["opp"][4*(e-1)+t],id:"pc_opp"+(4*(e-1)+t),top:n.hole_pos["opp"][4*(e-1)+t].top,left:n.hole_pos["opp"][4*(e-1)+t].left,size:100,zindex:11,layer:2,hole_size:n.hole_size},null,8,["v","id","top","left","hole_size"])],10,te)],4)),64))])),64))],512),Object(c["g"])("div",se,[(Object(c["u"])(),Object(c["f"])(c["a"],null,Object(c["A"])(2,e=>Object(c["g"])("div",{key:e,class:"h-50 row board-row d-flex align-items-center"},[(Object(c["u"])(),Object(c["f"])(c["a"],null,Object(c["A"])(4,t=>Object(c["g"])("div",{key:t,class:"p-1",style:Object(c["q"])({width:n.hole_size,height:n.hole_size})},[Object(c["g"])("div",{class:Object(c["p"])(["hole h-100 w-100",{can_hover_me:n.can_hover_me&&"me"==n.turn,focused_hole:n.focused_hole_moving=="me"+(4*(e-1)+t)}]),id:"hole_me"+(4*(e-1)+t),onClick:s=>i.click_hole("me",4*(e-1)+t)},[Object(c["i"])(a,{v:n.hole_layer_1["me"][4*(e-1)+t],top:0,left:0,size:100,zindex:10,layer:1},null,8,["v"]),Object(c["i"])(a,{v:n.delt_move["me"][4*(e-1)+t],id:"pc_me"+(4*(e-1)+t),top:n.hole_pos["me"][4*(e-1)+t].top,left:n.hole_pos["me"][4*(e-1)+t].left,size:100,zindex:11,layer:2,hole_size:n.hole_size},null,8,["v","id","top","left","hole_size"])],10,ce)],4)),64))])),64))])],512)}const ne={key:0,class:"pebbles-config"},ie={key:1,class:"pebbles-config"},ae={key:2,class:"pebbles-config"},le={key:3,class:"pebbles-config"},re={key:4,class:"pebbles-config"},_e={key:5,class:"pebbles-config"},de={key:6,class:"pebbles-config"},be={key:7,class:"pebbles-config"},pe={key:8,class:"pebbles-config"},me={key:9,class:"pebbles-config"},he={key:10,class:"pebbles-config"};function ue(e,t,s,o,n,i){const a=Object(c["B"])("Pebble");return Object(c["u"])(),Object(c["f"])("div",{ref:"pebbles_c",class:Object(c["p"])(["pebbles-container",{"layer-1":1==s.layer,"layer-2":2==s.layer}]),style:Object(c["q"])({top:s.top+"px",left:s.left+"px",width:s.size+"%",height:s.size+"%","background-color":s.bgcolor,"z-index":s.zindex})},[1==s.v?(Object(c["u"])(),Object(c["f"])("div",ne,[Object(c["i"])(a,{top:40,left:40})])):2==s.v?(Object(c["u"])(),Object(c["f"])("div",ie,[Object(c["i"])(a,{top:50,left:30}),Object(c["i"])(a,{top:30,left:50})])):3==s.v?(Object(c["u"])(),Object(c["f"])("div",ae,[Object(c["i"])(a,{top:40,left:40}),Object(c["i"])(a,{top:20,left:60}),Object(c["i"])(a,{top:60,left:20})])):4==s.v?(Object(c["u"])(),Object(c["f"])("div",le,[Object(c["i"])(a,{top:28,left:28}),Object(c["i"])(a,{top:28,left:52}),Object(c["i"])(a,{top:52,left:28}),Object(c["i"])(a,{top:52,left:52})])):5==s.v?(Object(c["u"])(),Object(c["f"])("div",re,[Object(c["i"])(a,{top:40,left:40}),Object(c["i"])(a,{top:20,left:60}),Object(c["i"])(a,{top:60,left:20}),Object(c["i"])(a,{top:20,left:20}),Object(c["i"])(a,{top:60,left:60})])):6==s.v?(Object(c["u"])(),Object(c["f"])("div",_e,[Object(c["i"])(a,{top:30,left:30}),Object(c["i"])(a,{top:10,left:50}),Object(c["i"])(a,{top:50,left:10}),Object(c["i"])(a,{top:50,left:50}),Object(c["i"])(a,{top:30,left:70}),Object(c["i"])(a,{top:70,left:30})])):7==s.v?(Object(c["u"])(),Object(c["f"])("div",de,[Object(c["i"])(a,{top:20,left:20}),Object(c["i"])(a,{top:10,left:50}),Object(c["i"])(a,{top:50,left:10}),Object(c["i"])(a,{top:60,left:60}),Object(c["i"])(a,{top:30,left:70}),Object(c["i"])(a,{top:70,left:30}),Object(c["i"])(a,{top:40,left:40})])):8==s.v?(Object(c["u"])(),Object(c["f"])("div",be,[Object(c["i"])(a,{top:32,left:32}),Object(c["i"])(a,{top:12,left:48}),Object(c["i"])(a,{top:48,left:12}),Object(c["i"])(a,{top:48,left:48}),Object(c["i"])(a,{top:32,left:68}),Object(c["i"])(a,{top:68,left:32}),Object(c["i"])(a,{top:16,left:16}),Object(c["i"])(a,{top:64,left:64})])):9==s.v?(Object(c["u"])(),Object(c["f"])("div",pe,[Object(c["i"])(a,{top:40,left:40}),Object(c["i"])(a,{top:24,left:56}),Object(c["i"])(a,{top:56,left:24}),Object(c["i"])(a,{top:24,left:24}),Object(c["i"])(a,{top:8,left:40}),Object(c["i"])(a,{top:40,left:8}),Object(c["i"])(a,{top:56,left:56}),Object(c["i"])(a,{top:40,left:72}),Object(c["i"])(a,{top:72,left:40})])):s.v>=10?(Object(c["u"])(),Object(c["f"])("div",me,[(Object(c["u"])(!0),Object(c["f"])(c["a"],null,Object(c["A"])(s.v,e=>(Object(c["u"])(),Object(c["d"])(a,{key:e,top:10+20*Math.floor((e-1)/4),left:10+(e-1)%4*20},null,8,["top","left"]))),128))])):(Object(c["u"])(),Object(c["f"])("div",he))],6)}function je(e,t,s,o,n,i){return Object(c["u"])(),Object(c["f"])("span",{class:"pebble",style:Object(c["q"])({width:s.size,height:s.size,top:s.top+"%",left:s.left+"%"})},null,4)}var Oe={components:{},props:{top:{type:Number,default:0},left:{type:Number,default:0},size:{type:String,default:"20%"}},data(){return{}},methods:{}};s("ae3c");const ge=g()(Oe,[["render",je],["__scopeId","data-v-bb7e282e"]]);var fe=ge,ke={components:{Pebble:fe},props:{top:{type:Number,default:0},left:{type:Number,default:0},size:{type:Number,default:100},bgcolor:{type:String,default:""},zindex:{type:Number,default:0},v:{type:Number,default:0},layer:{type:Number,default:0},hole_size:{type:String,default:"0px"}},data(){return{}},methods:{resize_pebble(e){let t=parseFloat(e.replace("px","")),s=t/6.5;return s+"px"},pos_pebble(e,t){let s=parseFloat(t.replace("px","")),c=s*e/83.5;return c}},mounted(){}};s("667f");const ye=g()(ke,[["render",ue],["__scopeId","data-v-1f596896"]]);var ve=ye,we=s("1157"),xe=s.n(we),Ce={components:{PebblesContainer:ve},props:{who_turn:{type:String,default:"me"},speed_timer:{type:Number,default:300},direction_me:{type:String,default:"clock"},opp_name:{type:String,default:"Joueur 2"},me_name:{type:String,default:"Joueur 1"},mode:{type:String,default:"local"},other_sid:{type:String,default:""},socket:{default:null},game_code:{type:String,default:""},sid:{type:String,default:""},is_host:{type:Boolean,default:!0}},data(){return{hole_size:"0px",pebbles:{opp:{},me:{}},turn:this.who_turn,can_hover_opp:!0,can_hover_me:!0,direction:this.direction_me,can_I_click:!0,can_opp_click:!0,focused_hole_moving:null,timer:null,winner:"none",hole_pos:{opp:{},me:{}},timer_move:null,tmstp_end_ms:0,time_step_move_ms:4e3,in_hand:0,delt_move:{opp:{},me:{}},are_pebbles_moving:!1,hole_layer_1:{opp:{},me:{}},opp_has_finished_turn_socket:!1,opp_has_finished_turn_animation:!1}},computed:{the_winner_is(){let e="Joueur";return"opp"==this.winner?e=this.opp_name:"me"==this.winner&&(e=this.me_name),e+" a gagné !"}},methods:{update_hole_size(){let e=this.$refs.board_side_1.clientHeight,t=this.$refs.board_side_1.clientWidth,s=0;s=t>2*e?e/2:t/4,this.hole_size=s+"px"},init_pos_pc(){for(let e=1;e<=8;e++)this.hole_pos["opp"][e].top=0==this.hole_pos["opp"][e].top?.1:0,this.hole_pos["opp"][e].left=0==this.hole_pos["opp"][e].left?.1:0,this.hole_pos["me"][e].top=0==this.hole_pos["me"][e].top?.1:0,this.hole_pos["me"][e].left=0==this.hole_pos["me"][e].left?.1:0},init_layer_1(){for(let e=1;e<=8;e++)this.hole_layer_1["opp"][e]=0,this.hole_layer_1["me"][e]=0},animate_hole(e,t,s,c,o=!1){this.are_pebbles_moving=!0;const n=document.getElementById("pc_"+e+t).getBoundingClientRect(),i=document.getElementById("hole_"+s+c).getBoundingClientRect(),a=i.left-n.left,l=i.top-n.top,r=a>0?"+="+a+"px":"-="+-a+"px",_=l>0?"+="+l+"px":"-="+-l+"px";this.hole_pos[e][t].left=.1,this.hole_pos[e][t].top=.1;const d=this;xe()("#pc_"+e+t).animate({left:r,top:_},this.speed_timer,"swing",(function(){const n=document.getElementById("hole_"+e+t).getBoundingClientRect(),i=document.getElementById("hole_"+s+c).getBoundingClientRect(),a=i.left-n.left,l=i.top-n.top;d.hole_pos[e][t].left=a,d.hole_pos[e][t].top=l,o&&(d.hole_pos[e][t].left=0==d.hole_pos[e][t].left?.1:0,d.hole_pos[e][t].top=0==d.hole_pos[e][t].top?.1:0,d.delt_move[e][t]=0,d.delt_move[s][c]=0),d.are_pebbles_moving=!1}))},get_next_num(e,t){return"me"==e&&"clock"==this.direction||"opp"==e&&"c-clock"==this.direction?4==t?t=8:5==t?t=1:t>4?t-=1:t+=1:8==t?t=4:1==t?t=5:t>4?t+=1:t-=1,t},has_pebbles_front(e="opp"){let t=5,s=8;"me"==e&&(t=1,s=4);for(let c=t;c<=s;c++)if(this.pebbles[e][c]>0)return!0;return!1},get_position_pebbles_and_score(){let e={pos:{host:{},client:{}},score:{host:0,client:0}};for(let t=1;t<=8;t++){let s=t;this.is_host?(e.score.host+=this.pebbles["me"][s],e.score.client+=this.pebbles["opp"][s],e.pos.host[s]=this.pebbles["me"][s],e.pos.client[s]=this.pebbles["opp"][s]):(s=9-t,e.score.host+=this.pebbles["opp"][s],e.score.client+=this.pebbles["me"][s],e.pos.host[s]=this.pebbles["opp"][t],e.pos.client[s]=this.pebbles["me"][t])}return e},move_pebbles(e,t){this.make_turn("none"),this.init_pos_pc(),this.init_layer_1(),this.focused_hole_moving=e+t,this.in_hand=0;var s=!0,c=!1;const o=t;this.animate_hole(e,o,e,this.get_next_num(e,o)),this.delt_move[e][t]=this.pebbles[e][t],this.opp_has_finished_turn_socket=!1,this.opp_has_finished_turn_animation=!1,this.timer=setInterval(function(){if(this.are_pebbles_moving)return!1;if(!s&&this.in_hand<=0&&1==this.pebbles[e][t]){if(clearInterval(this.timer),this.focused_hole_moving=null,this.init_pos_pc(),this.init_layer_1(),this.hole_pos[e][o].left=0,this.hole_pos[e][o].top=0,this.delt_move[e][o]=this.pebbles[e][o],"online"==this.mode&&"me"==this.turn){this.make_turn("switch");let e={to:this.other_sid,from:this.sid,game_code:this.game_code,pos:this.get_position_pebbles_and_score()};this.socket.emit("finish_turn",JSON.stringify(e))}else"online"==this.mode&&"opp"==this.turn?this.opp_has_finished_turn_socket?this.make_turn("switch"):this.opp_has_finished_turn_animation=!0:"online"!=this.mode&&this.make_turn("switch");return!1}if(this.in_hand<=0&&this.pebbles[e][t]>1){t==o&&(this.hole_layer_1[e][o]=0);var n=0,i="",a=null;if("me"==e&&t>=1&&t<=4?(i="opp",a=t+4,n=this.pebbles[i][a],n<=0&&!this.has_pebbles_front(i)&&(a=t,n=this.pebbles[i][a])):"opp"==e&&t>=5&&t<=8&&(i="me",a=t-4,n=this.pebbles[i][a],n<=0&&!this.has_pebbles_front(i)&&(a=t,n=this.pebbles[i][a])),!s&&!c&&n>0){if(this.pebbles[e][t]+=n,this.delt_move[e][o]=this.pebbles[e][t],this.pebbles[i][a]=0,c=!0,this.emit_pts(),"none"!=this.check_winner()){if(clearInterval(this.timer),this.focused_hole_moving=null,this.emit_winner(),this.is_host){let e={game_code:this.game_code,pos:this.get_position_pebbles_and_score(),winner:"me"==this.winner?"host":"client"};this.socket.emit("game_over",JSON.stringify(e))}}else this.animate_hole(e,o,e,this.get_next_num(e,t));return!1}this.in_hand=this.pebbles[e][t],this.pebbles[e][t]=0}else s&&1==this.pebbles[e][t]&&(this.in_hand=this.pebbles[e][t],this.pebbles[e][t]=0);if(s=!1,c=!1,t=this.get_next_num(e,t),this.focused_hole_moving=e+t,this.pebbles[e][t]+=1,this.in_hand-=1,this.delt_move[e][o]-=1,t!=o?this.delt_move[e][t]=this.pebbles[e][t]:this.hole_layer_1[e][o]=this.pebbles[e][o],this.in_hand>0)this.animate_hole(e,o,e,this.get_next_num(e,t));else if(this.pebbles[e][t]>1)if("me"==e&&t>4||"opp"==e&&t<5)this.delt_move[e][o]=this.pebbles[e][t],this.delt_move[e][t]=0,this.animate_hole(e,o,e,this.get_next_num(e,t));else{let s="opp";"opp"==e&&(s="me");let c=0,n=1;"me"==e?(n=t+4,c=this.pebbles[s][n],c<=0&&!this.has_pebbles_front(s)&&(n=t)):(n=t-4,c=this.pebbles[s][n],c<=0&&!this.has_pebbles_front(s)&&(n=t)),c=this.pebbles[s][n],this.delt_move[e][o]=this.pebbles[e][t],c>0?this.animate_hole(s,n,e,t,!0):(this.delt_move[e][t]=0,this.animate_hole(e,o,e,this.get_next_num(e,t)))}}.bind(this),this.speed_timer/10)},click_hole(e,t){if(("me"==e&&this.can_I_click||"opp"==e&&this.can_opp_click)&&this.pebbles[e][t]>0&&(this.move_pebbles(e,t),"online"==this.mode&&"me"==e&&this.socket)){let e={to:this.other_sid,num:t,game_code:this.game_code,speed:this.speed_timer};this.socket.emit("move_pebbles",JSON.stringify(e))}},make_turn(e){"switch"==e&&("me"==this.turn?this.turn="opp":this.turn="me",e=this.turn),"me"==e?(this.can_hover_me=!0,this.can_hover_opp=!1,this.can_I_click=!0,this.can_opp_click=!1):"opp"==e?(this.can_hover_me=!1,this.can_hover_opp=!0,this.can_I_click=!1,this.can_opp_click=!0,"online"==this.mode&&(this.can_hover_opp=!1,this.can_opp_click=!1)):"none"==e&&(this.can_hover_me=!1,this.can_hover_opp=!1,this.can_I_click=!1,this.can_opp_click=!1,this.$emit("turn",e)),"me"!=e&&"opp"!=e||this.$emit("turn",e)},emit_pts(){let e=0,t=0;for(let s=1;s<=8;s++)e+=this.pebbles["opp"][s],t+=this.pebbles["me"][s];this.$emit("pts",{opp:e,me:t})},check_winner(){let e=0,t=0;for(let s=1;s<=8;s++)e+=this.pebbles["opp"][s],t+=this.pebbles["me"][s];return this.winner=e<=1?"me":t<=1?"opp":"none",this.winner},emit_winner(){this.$emit("winner",this.winner)},handle_message(e){if(e=JSON.parse(e),"move_pebbles"==e.type){let t=9-e.num;this.move_pebbles("opp",t)}else"finish_turn"==e.type&&(this.opp_has_finished_turn_animation?this.make_turn("switch"):this.opp_has_finished_turn_socket=!0)}},created(){for(let e=1;e<=8;e++)this.pebbles["opp"][e]=2,this.pebbles["me"][e]=2,this.hole_pos["opp"][e]={top:0,left:0},this.hole_pos["me"][e]={top:0,left:0},this.delt_move["opp"][e]=2,this.delt_move["me"][e]=2,this.hole_layer_1["opp"][e]=0,this.hole_layer_1["me"][e]=0;this.emit_pts(),this.winner="none",this.make_turn(this.turn),"online"==this.mode&&this.socket&&this.socket.on("message",this.handle_message)},mounted(){this.update_hole_size(),window.addEventListener("resize",this.update_hole_size),this.$emit("turn",this.turn)},beforeUnmount(){window.removeEventListener("resize",this.update_hole_size),this.timer&&clearInterval(this.timer),this.time_move&&clearInterval(this.timer_move),"online"==this.mode&&this.socket&&this.socket.off("message",this.handle_message)}};s("24ea");const Se=g()(Ce,[["render",oe],["__scopeId","data-v-df667996"]]);var Be=Se,Ee={components:{Board:Be},data(){return{}},methods:{}};s("0e3e");const ze=g()(Ee,[["render",F],["__scopeId","data-v-1f07689f"]]);var Ie=ze;const Ae=e=>(Object(c["x"])("data-v-a26c0348"),e=e(),Object(c["v"])(),e),Ne={key:0,class:"container h-100 d-flex flex-column justify-content-between"},Je={class:"banner-top-container w-100"},$e={class:""},qe={class:"m-2 p-2 d-flex flex-column align-items-center"},Te=Ae(()=>Object(c["g"])("p",{class:"text-center m-1"},"Qui commence ?",-1)),Ve={class:"btn-group-vertical",role:"group"},Pe={class:"m-2 p-2 d-flex flex-column align-items-center"},Le=Ae(()=>Object(c["g"])("p",{class:"text-center m-1"},"Le joueur qui commence utilise :",-1)),Re={class:"btn-group",role:"group"},Me=Ae(()=>Object(c["g"])("p",{class:"m-0"},"sens horaire",-1)),Ue=Ae(()=>Object(c["g"])("p",{class:"m-0"},"sens antihoraire",-1)),Ke={class:"m-2 p-2 d-flex flex-column align-items-center"},Ge=Ae(()=>Object(c["g"])("p",{class:"text-center m-1"},"Vitesse des cailloux",-1)),Qe={class:"btn-group",role:"group"},De={class:"m-3 d-flex flex-column align-items-center"},He=Ae(()=>Object(c["g"])("i",{class:"fa-solid fa-person-running"},null,-1)),We=Object(c["h"])(" Commencer"),Fe=[He,We],Xe=Ae(()=>Object(c["g"])("i",{class:"fa-solid fa-rotate-left"},null,-1)),Ye=Object(c["h"])(" Accueil"),Ze=Ae(()=>Object(c["g"])("div",null,null,-1)),et={key:1,class:"container h-100 d-flex flex-column justify-content-around"},tt={class:"banner-top-container w-100"},st={class:"board-extend-container"},ct={class:"row h-100"},ot={class:"col h-100"},nt={class:"row"},it={class:"col d-flex justify-content-center"},at=Ae(()=>Object(c["g"])("div",null,null,-1));function lt(e,t,s,o,n,i){const a=Object(c["B"])("BannerTop"),l=Object(c["B"])("Arrow"),r=Object(c["B"])("router-link"),_=Object(c["B"])("BoardExtend"),d=Object(c["B"])("ButtonConfig");return"home"==n.mode?(Object(c["u"])(),Object(c["f"])("div",Ne,[Object(c["g"])("div",Je,[Object(c["i"])(a,{title:n.title_mode},null,8,["title"])]),Object(c["g"])("div",$e,[Object(c["g"])("div",qe,[Te,Object(c["g"])("div",Ve,[Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn",{"btn-dark":"me"==n.p_start,"btn-outline-dark":"me"!=n.p_start}]),onClick:t[0]||(t[0]=e=>i.click_p_start("me"))},"Joueur 1 (Naruto)",2),Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn",{"btn-dark":"opp"==n.p_start,"btn-outline-dark":"opp"!=n.p_start}]),onClick:t[1]||(t[1]=e=>i.click_p_start("opp"))},"Joueur 2 (Sasuke)",2)])]),Object(c["g"])("div",Pe,[Le,Object(c["g"])("div",Re,[Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn",{"btn-dark":"clock"==n.p_start_c,"btn-outline-dark":"clock"!=n.p_start_c}]),onClick:t[2]||(t[2]=e=>i.click_p_start_c("clock"))},[Object(c["i"])(l),Me],2),Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn",{"btn-dark":"c-clock"==n.p_start_c,"btn-outline-dark":"c-clock"!=n.p_start_c}]),onClick:t[3]||(t[3]=e=>i.click_p_start_c("c-clock"))},[Object(c["i"])(l,{is_clockwise:!1}),Ue],2)])]),Object(c["g"])("div",Ke,[Ge,Object(c["g"])("div",Qe,[Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn",{"btn-dark":"slow"==n.move_speed,"btn-outline-dark":"slow"!=n.move_speed}]),onClick:t[4]||(t[4]=e=>i.click_speed("slow"))},"Lente",2),Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn",{"btn-dark":"normal"==n.move_speed,"btn-outline-dark":"normal"!=n.move_speed}]),onClick:t[5]||(t[5]=e=>i.click_speed("normal"))},"Moyenne",2),Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn",{"btn-dark":"fast"==n.move_speed,"btn-outline-dark":"fast"!=n.move_speed}]),onClick:t[6]||(t[6]=e=>i.click_speed("fast"))},"Rapide",2)])]),Object(c["g"])("div",De,[Object(c["g"])("button",{class:"btn btn-block btn-outline-dark",onClick:t[7]||(t[7]=e=>i.start_game())},Fe),Object(c["i"])(r,{to:"/",class:"btn btn-block btn-outline-dark"},{default:Object(c["I"])(()=>[Xe,Ye]),_:1})])]),Ze])):(Object(c["u"])(),Object(c["f"])("div",et,[Object(c["g"])("div",tt,[Object(c["i"])(a,{title:n.title_mode},null,8,["title"])]),Object(c["g"])("div",st,[Object(c["g"])("div",ct,[Object(c["g"])("div",ot,[Object(c["i"])(_,{speed_timer:n.speed_timer,p_start:n.p_start,p_start_c:n.p_start_c,opp_name:"Sasuke",me_name:"Naruto"},null,8,["speed_timer","p_start","p_start_c"])])])]),Object(c["g"])("div",nt,[Object(c["g"])("div",it,[Object(c["i"])(d,{onSpeed:i.update_speed,onRetry:i.retry_game,speed:n.move_speed},null,8,["onSpeed","onRetry","speed"])])]),at]))}const rt={class:"h-100 d-flex flex-column justify-content-between"},_t={class:"dashboard-player"},dt={class:"board-container"},bt={class:"row h-100"},pt={class:"col h-100"},mt={class:"dashboard-player"};function ht(e,t,s,o,n,i){const a=Object(c["B"])("DashBoardPlayer"),l=Object(c["B"])("Board");return Object(c["u"])(),Object(c["f"])("div",rt,[Object(c["g"])("div",_t,[Object(c["i"])(a,{is_clockwise:"opp"==s.p_start&&"clock"==s.p_start_c||"me"==s.p_start&&"c-clock"==s.p_start_c,player_name:s.opp_name,is_turn:"opp"==n.who_turn,pts:n.opp_pts},null,8,["is_clockwise","player_name","is_turn","pts"])]),Object(c["g"])("div",dt,[Object(c["g"])("div",bt,[Object(c["g"])("div",pt,[Object(c["i"])(l,{onTurn:i.update_turn,onPts:i.update_pts,onWinner:i.end_game,speed_timer:s.speed_timer,who_turn:s.p_start,direction_me:"me"==s.p_start&&"clock"==s.p_start_c||"opp"==s.p_start&&"c-clock"==s.p_start_c?"clock":"c-clock",opp_name:s.opp_name,me_name:s.me_name,mode:s.mode,other_sid:s.other_sid,socket:s.socket,game_code:s.game_code,sid:s.sid,is_host:s.is_host},null,8,["onTurn","onPts","onWinner","speed_timer","who_turn","direction_me","opp_name","me_name","mode","other_sid","socket","game_code","sid","is_host"])])])]),Object(c["g"])("div",mt,[Object(c["i"])(a,{is_clockwise:"me"==s.p_start&&"clock"==s.p_start_c||"opp"==s.p_start&&"c-clock"==s.p_start_c,player_name:s.me_name,is_turn:"me"==n.who_turn,pts:n.me_pts},null,8,["is_clockwise","player_name","is_turn","pts"])])])}const ut=e=>(Object(c["x"])("data-v-561988c8"),e=e(),Object(c["v"])(),e),jt={class:"col-2 d-flex flex-column justify-content-center align-items-center p-0"},Ot=ut(()=>Object(c["g"])("span",{class:"text-play text-center w-100"},"Sens",-1)),gt={class:"col-7 d-flex flex-column justify-content-center px-1"},ft={class:"player-name"},kt={class:"col-3 d-flex justify-conent-center align-items-center p-0"},yt={class:"text-center text-pts w-100"};function vt(e,t,s,o,n,i){const a=Object(c["B"])("Arrow");return Object(c["u"])(),Object(c["f"])("div",{class:Object(c["p"])(["h-100 row",{"is-turn":s.is_turn}])},[Object(c["g"])("div",jt,[Ot,Object(c["i"])(a,{is_clockwise:s.is_clockwise},null,8,["is_clockwise"])]),Object(c["g"])("div",gt,[Object(c["g"])("span",ft,Object(c["E"])(s.player_name),1)]),Object(c["g"])("div",kt,[Object(c["g"])("span",yt,"Pts : "+Object(c["E"])(s.pts),1)])],2)}function wt(e,t,s,o,n,i){return Object(c["u"])(),Object(c["f"])("div",{class:Object(c["p"])(["d-flex justify-content-center align-items-center",{rotating:s.is_clockwise,"rotating-counter":!s.is_clockwise}])},[Object(c["g"])("i",{class:Object(c["p"])(["icon-arrow bi d-flex justify-content-center align-items-center h-100",{"bi-arrow-clockwise":s.is_clockwise,"bi-arrow-counterclockwise":!s.is_clockwise}])},null,2)],2)}var xt={components:{},props:{is_clockwise:{type:Boolean,default:!0}},data(){return{}},methods:{}};s("7c15");const Ct=g()(xt,[["render",wt],["__scopeId","data-v-5094a579"]]);var St=Ct,Bt={components:{Arrow:St},props:{is_clockwise:{type:Boolean,default:!0},player_name:{type:String,default:"Joueur"},pts:{type:Number,default:16},is_turn:{type:Boolean,default:!0}},data(){return{}},methods:{}};s("8ae6");const Et=g()(Bt,[["render",vt],["__scopeId","data-v-561988c8"]]);var zt=Et,It={components:{Board:Be,DashBoardPlayer:zt},props:{p_start:{type:String,default:"me"},p_start_c:{type:String,default:"clock"},speed_timer:{tyoe:Number,default:300},opp_name:{type:String,default:"Joueur 2"},me_name:{type:String,default:"Joueur 1"},mode:{type:String,default:"local"},other_sid:{type:String,default:""},socket:{default:null},game_code:{type:String,default:""},sid:{type:String,default:""},is_host:{type:Boolean,default:!0}},data(){return{who_turn:this.p_start,opp_pts:0,me_pts:0,winner:"none"}},methods:{update_turn(e){this.who_turn=e,this.$emit("turn",e)},update_pts(e){this.opp_pts=e.opp,this.me_pts=e.me},end_game(e){this.winner=e}},created(){this.$store.dispatch("set_is_in_game",!0)},beforeUnmount(){this.$store.dispatch("set_is_in_game",!1)}};s("d140");const At=g()(It,[["render",ht],["__scopeId","data-v-44dd643f"]]);var Nt=At;const Jt={class:"row"},$t={class:"col"},qt={class:""},Tt={class:"text-center"};function Vt(e,t,s,o,n,i){const a=Object(c["B"])("KatroTitle");return Object(c["u"])(),Object(c["f"])("div",Jt,[Object(c["g"])("div",$t,[Object(c["i"])(a),Object(c["g"])("div",qt,[Object(c["g"])("h6",Tt,Object(c["E"])(s.title),1)])])])}var Pt={components:{KatroTitle:k},props:{title:{type:String,default:""}},data(){return{}},methods:{}};const Lt=g()(Pt,[["render",Vt]]);var Rt=Lt;const Mt=Object(c["g"])("i",{class:"bi bi-gear"},null,-1),Ut=Object(c["h"])(" Paramètre "),Kt=[Mt,Ut],Gt={class:"modal fade",id:"menu-game-modal",tabindex:"-1",role:"dialog","aria-labelledby":"menu-game-modal-title","aria-hidden":"true"},Qt={class:"modal-dialog modal-dialog-centered",role:"document"},Dt={class:"modal-content"},Ht=Object(c["g"])("div",{class:"modal-header"},[Object(c["g"])("h5",{class:"modal-title"},"Paramètre"),Object(c["g"])("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[Object(c["g"])("span",{"aria-hidden":"true"},"×")])],-1),Wt={class:"modal-body"},Ft={class:"d-flex flex-column align-items-center"},Xt=Object(c["g"])("p",{class:"m-0 mb-2 text-center"},"Vitesse",-1),Yt={class:"btn-group",role:"group"},Zt=["disabled"],es=["disabled"],ts=["disabled"],ss={key:0,class:"my-2 text-center font-italic text-danger"},cs={key:1,class:"m-0 text-center font-italic text-danger"},os={class:"mt-3"},ns={key:0,class:"mt-3 d-flex justify-content-center"},is={key:1,class:""},as={key:0,class:"text-center m-1"},ls={key:1,class:"d-flex flex-column align-items-center"},rs=Object(c["g"])("p",{class:"m-0 mb-2 text-center"},"Qui commence ?",-1),_s={class:"btn-group-vertical",role:"group"},ds={key:2,class:"m-1 p-2 d-flex flex-column align-items-center"},bs=Object(c["g"])("p",{class:"text-center m-1"},"Le joueur qui commence utilise :",-1),ps={class:"btn-group",role:"group"},ms=Object(c["g"])("p",{class:"m-0"},"sens horaire",-1),hs=Object(c["g"])("p",{class:"m-0"},"sens antihoraire",-1),us={class:"d-flex justify-content-around"},js={class:"mt-3 d-flex justify-content-center"},Os={key:1,class:""},gs=Object(c["g"])("p",{class:"text-center m-1"},"Quitter et aller à l'accueil ?",-1),fs={class:"d-flex justify-content-around"};function ks(e,t,s,o,n,i){const a=Object(c["B"])("Arrow");return Object(c["u"])(),Object(c["f"])(c["a"],null,[Object(c["g"])("button",{class:"btn btn-sm btn-outline-dark","data-toggle":"modal","data-target":"#menu-game-modal",ref:"btn_menu",onClick:t[0]||(t[0]=e=>i.open_modal())},Kt,512),Object(c["g"])("div",Gt,[Object(c["g"])("div",Qt,[Object(c["g"])("div",Dt,[Ht,Object(c["g"])("div",Wt,[Object(c["g"])("div",Ft,[Xt,Object(c["g"])("div",Yt,[Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn",{"btn-dark":"slow"==s.speed,"btn-outline-dark":"slow"!=s.speed}]),onClick:t[1]||(t[1]=e=>i.click_speed("slow")),disabled:i.is_speed_btn_disabled},"Lente",10,Zt),Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn",{"btn-dark":"normal"==s.speed,"btn-outline-dark":"normal"!=s.speed}]),onClick:t[2]||(t[2]=e=>i.click_speed("normal")),disabled:i.is_speed_btn_disabled},"Moyenne",10,es),Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn",{"btn-dark":"fast"==s.speed,"btn-outline-dark":"fast"!=s.speed}]),onClick:t[3]||(t[3]=e=>i.click_speed("fast")),disabled:i.is_speed_btn_disabled},"Rapide",10,ts)]),"online"!=s.mode||s.is_host?Object(c["e"])("",!0):(Object(c["u"])(),Object(c["f"])("p",ss,"Seul l'hôte peut changer la vitesse et recommencer la partie")),"online"==s.mode&&s.is_host&&"me"!=s.turn?(Object(c["u"])(),Object(c["f"])("p",cs,"Attendez que l'adversaire finisse son tour avant de changer la vitesse")):Object(c["e"])("",!0)]),Object(c["g"])("div",os,["online"!=s.mode||"online"==s.mode&&s.is_host?(Object(c["u"])(),Object(c["f"])("div",ns,[n.wanna_retry?(Object(c["u"])(),Object(c["f"])("div",is,["online"!=s.mode?(Object(c["u"])(),Object(c["f"])("p",as,"Revoir les configurations et recommencer ?")):Object(c["e"])("",!0),"online"==s.mode?(Object(c["u"])(),Object(c["f"])("div",ls,[rs,Object(c["g"])("div",_s,[Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn btn-sm",{"btn-dark":"me"==n.p_s,"btn-outline-dark":"me"!=n.p_s}]),onClick:t[5]||(t[5]=e=>i.click_p_start("me"))},"Vous",2),Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn btn-sm",{"btn-dark":"opp"==n.p_s,"btn-outline-dark":"opp"!=n.p_s}]),onClick:t[6]||(t[6]=e=>i.click_p_start("opp"))},"L'adversaire",2)])])):Object(c["e"])("",!0),"online"==s.mode?(Object(c["u"])(),Object(c["f"])("div",ds,[bs,Object(c["g"])("div",ps,[Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn btn-sm",{"btn-dark":"clock"==n.p_s_c,"btn-outline-dark":"clock"!=n.p_s_c}]),onClick:t[7]||(t[7]=e=>i.click_p_start_c("clock"))},[Object(c["i"])(a),ms],2),Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn btn-sm",{"btn-dark":"c-clock"==n.p_s_c,"btn-outline-dark":"c-clock"!=n.p_s_c}]),onClick:t[8]||(t[8]=e=>i.click_p_start_c("c-clock"))},[Object(c["i"])(a,{is_clockwise:!1}),hs],2)])])):Object(c["e"])("",!0),Object(c["g"])("div",us,[Object(c["g"])("button",{class:"btn btn-sm btn-outline-dark m-2",onClick:t[9]||(t[9]=e=>i.retry(!1))},"Annuler"),Object(c["g"])("button",{class:"btn btn-sm btn-outline-dark m-2",onClick:t[10]||(t[10]=e=>i.retry(!0))},"Recommencer")])])):(Object(c["u"])(),Object(c["f"])("button",{key:0,class:"btn btn-block btn-outline-dark",onClick:t[4]||(t[4]=e=>i.try_retry())},"Recommencer"))])):Object(c["e"])("",!0),Object(c["g"])("div",js,[n.wanna_quit?(Object(c["u"])(),Object(c["f"])("div",Os,[gs,Object(c["g"])("div",fs,[Object(c["g"])("button",{class:"btn btn-sm btn-outline-dark m-2",onClick:t[12]||(t[12]=e=>i.quit(!1))},"Non"),Object(c["g"])("button",{class:"btn btn-sm btn-outline-dark m-2",onClick:t[13]||(t[13]=e=>i.quit(!0))},"Oui")])])):(Object(c["u"])(),Object(c["f"])("button",{key:0,class:"btn btn-block btn-outline-dark",onClick:t[11]||(t[11]=e=>i.try_quit())},Object(c["E"])("online"==s.mode?"Quitter":"Accueil"),1))])])])])])])],64)}s("14d9");var ys={components:{Arrow:St},props:{speed:{type:String,default:"normal"},mode:{type:String,default:"local"},is_host:{type:Boolean,default:!0},turn:{type:String,default:"me"},winner:{type:String,default:"none"},p_start:{type:String,default:"me"},p_start_c:{type:String,default:"clock"}},emits:["speed","retry","update_p_c"],data(){return{move_speed:this.speed,wanna_retry:!1,wanna_quit:!1,p_s:this.p_start,p_s_c:this.p_start_c}},computed:{is_speed_btn_disabled(){return!this.is_host||!("online"!=this.mode||!this.is_host||"me"==this.turn)}},methods:{click_p_start(e){this.p_s=e},click_p_start_c(e){this.p_s_c=e},click_speed(e){let t=400;"normal"==e?t=400:"slow"==e?t=1200:"fast"==e&&(t=90),this.$emit("speed",t)},try_retry(){this.wanna_retry=!0},retry(e){this.wanna_retry=e,e&&("online"==this.mode&&(this.trigger_close_modal(),this.$emit("update_p_c",{p_s:this.p_s,p_s_c:this.p_s_c})),this.$emit("retry",!0))},open_modal(){this.wanna_retry=!1,this.wanna_quit=!1},trigger_close_modal(){document.querySelectorAll(".modal.show#menu-game-modal").length>0&&this.$refs.btn_menu.click()},try_quit(){this.wanna_quit=!0},quit(e){this.wanna_quit=e,e&&(this.trigger_close_modal(),this.$router.push({path:"/"}))}},beforeUnmount(){this.trigger_close_modal()}};const vs=g()(ys,[["render",ks]]);var ws=vs,xs={components:{BoardExtend:Nt,BannerTop:Rt,ButtonConfig:ws,Arrow:St},data(){return{speed_timer:400,move_speed:"normal",mode:"home",p_start:"me",p_start_c:"clock",title_mode:"Multijoueur en local"}},methods:{update_speed(e){this.speed_timer=e;let t=400;400==e?t="normal":1200==e?t="slow":90==e&&(t="fast"),this.move_speed=t},click_p_start(e){this.p_start=e},click_p_start_c(e){this.p_start_c=e},start_game(){this.mode="game"},retry_game(e){e&&(this.mode="home")},click_speed(e){this.move_speed=e;let t=400;"normal"==e?t=400:"slow"==e?t=1200:"fast"==e&&(t=90),this.speed_timer=t}},mounted(){}};s("dd0b");const Cs=g()(xs,[["render",lt],["__scopeId","data-v-a26c0348"]]);var Ss=Cs;const Bs=e=>(Object(c["x"])("data-v-f29dc626"),e=e(),Object(c["v"])(),e),Es={key:0,class:"container h-100"},zs={class:"banner-top-container w-100"},Is={class:"m-3 d-flex justify-content-center"},As={class:""},Ns=Bs(()=>Object(c["g"])("i",{class:"fa-solid fa-right-to-bracket"},null,-1)),Js=Object(c["h"])(" Rejoindre une partie"),$s=[Ns,Js],qs=Bs(()=>Object(c["g"])("i",{class:"fa-solid fa-circle-plus"},null,-1)),Ts=Object(c["h"])(" Créer une partie"),Vs=[qs,Ts],Ps=Bs(()=>Object(c["g"])("i",{class:"fa-solid fa-rotate-left"},null,-1)),Ls=Object(c["h"])(" Accueil"),Rs={key:1,class:"container h-100"},Ms={class:"banner-top-container w-100"},Us={class:"m-0"},Ks=Bs(()=>Object(c["g"])("strong",null,"Votre pseudo : ",-1)),Gs=Bs(()=>Object(c["g"])("strong",null,"Qui commence : ",-1)),Qs=Bs(()=>Object(c["g"])("strong",null,"Le joueur qui commence utilise : ",-1)),Ds=Bs(()=>Object(c["g"])("strong",null,"Vitesse des cailloux : ",-1)),Hs={key:0},Ws=Bs(()=>Object(c["g"])("strong",null,"Code de la partie : ",-1)),Fs=Bs(()=>Object(c["g"])("i",{class:"bi bi-clipboard"},null,-1)),Xs=Object(c["h"])(" Copier le code "),Ys=[Fs,Xs],Zs={key:1,class:"btn btn-sm btn-dark my-1",disabled:!0},ec=Bs(()=>Object(c["g"])("i",{class:"bi bi-clipboard-check"},null,-1)),tc=Object(c["h"])(" Copié "),sc=[ec,tc],cc={key:0,class:"text-center mx-0 my-4"},oc={key:1,class:"text-center mx-0 my-4 text-danger font-italic"},nc={key:2,class:"my-2 p-2 border border-dark rounded"},ic=Bs(()=>Object(c["g"])("p",{class:"m-0 text-center font-weight-bold"},"En attente de joueur",-1)),ac={class:"text-center m-0"},lc=["onClick"],rc={key:1,class:"btn btn-sm btn-outline-dark ml-2",disabled:!0},_c=Bs(()=>Object(c["g"])("span",{class:"spinner-border spinner-border-sm"},null,-1)),dc=[_c],bc={key:2,class:"btn btn-sm btn-outline-dark ml-2",disabled:!0},pc={class:"my-2 d-flex justify-content-center"},mc={key:2,class:"container h-100"},hc={class:"banner-top-container w-100"},uc=Bs(()=>Object(c["g"])("h6",{class:"text-center border-top pt-2"},"Rejoindre une partie",-1)),jc={class:"m-3 d-flex flex-column justify-content-center"},Oc={class:"d-flex flex-column align-items-center"},gc={class:"col-md-4 m-2"},fc=Bs(()=>Object(c["g"])("label",{for:"code_input"},"Saisissez le code",-1)),kc={key:0,class:"text-danger text-center font-italic m-0"},yc={class:"col-md-4 m-2"},vc=Bs(()=>Object(c["g"])("label",{for:"player_name"},"Votre pseudo",-1)),wc={key:0,class:"text-danger text-center font-italic m-0"},xc={class:"my-3"},Cc={key:3,class:"container h-100"},Sc={class:"banner-top-container w-100"},Bc={class:"m-0"},Ec=Bs(()=>Object(c["g"])("strong",null,"Votre pseudo : ",-1)),zc=Bs(()=>Object(c["g"])("strong",null,"Code de la partie : ",-1)),Ic={key:0,class:"text-center mx-0 my-4"},Ac={key:1,class:"text-center mx-0 my-4"},Nc=Object(c["h"])("Attendez que l'hôte ("),Jc={class:"font-italic"},$c=Object(c["h"])(") accepte votre demande"),qc={key:2,class:"text-center mx-0 my-4 text-danger font-italic"},Tc={key:3,class:"text-center mx-0 my-4 text-danger font-italic"},Vc=Object(c["h"])("L'hôte ("),Pc={class:"font-italic"},Lc=Object(c["h"])(") a quitté"),Rc={key:4,class:"text-center mx-0 my-4 text-danger font-italic"},Mc={key:5,class:"text-center mx-0 my-4 text-danger font-italic"},Uc=Object(c["h"])("L'hôte ("),Kc={class:"font-italic"},Gc=Object(c["h"])(") a refusé votre demande"),Qc={class:"my-2 d-flex justify-content-center"},Dc={key:4,class:"container h-100 d-flex flex-column"},Hc={class:"banner-top-container w-100"},Wc=Bs(()=>Object(c["g"])("h6",{class:"text-center border-top pt-2"},"Créer une partie",-1)),Fc={class:""},Xc={class:"m-1 p-2 d-flex flex-column align-items-center"},Yc={class:"col-md-4"},Zc=Bs(()=>Object(c["g"])("label",{for:"player_name",class:"text-center w-100"},"Votre pseudo",-1)),eo={key:0,class:"text-danger text-center font-italic m-0"},to={class:"m-1 p-2 d-flex flex-column align-items-center"},so=Bs(()=>Object(c["g"])("p",{class:"text-center m-1"},"Qui commence ?",-1)),co={class:"btn-group-vertical",role:"group"},oo={class:"m-1 p-2 d-flex flex-column align-items-center"},no=Bs(()=>Object(c["g"])("p",{class:"text-center m-1"},"Le joueur qui commence utilise :",-1)),io={class:"btn-group",role:"group"},ao=Bs(()=>Object(c["g"])("p",{class:"m-0"},"sens horaire",-1)),lo=Bs(()=>Object(c["g"])("p",{class:"m-0"},"sens antihoraire",-1)),ro={class:"m-1 p-2 d-flex flex-column align-items-center"},_o=Bs(()=>Object(c["g"])("p",{class:"text-center m-1"},"Vitesse des cailloux",-1)),bo={class:"btn-group",role:"group"},po={class:"m-3 d-flex flex-column align-items-center"},mo=Bs(()=>Object(c["g"])("i",{class:"fa-solid fa-person-running"},null,-1)),ho=Object(c["h"])(" Ok"),uo=[mo,ho],jo=Bs(()=>Object(c["g"])("i",{class:"fa-solid fa-rotate-left"},null,-1)),Oo=Object(c["h"])(" Retour"),go=[jo,Oo],fo=Bs(()=>Object(c["g"])("div",null,null,-1)),ko={key:5,class:"container h-100 d-flex flex-column justify-content-around"},yo={class:"banner-top-container w-100"},vo={class:"board-extend-container"},wo={class:"row h-100"},xo={class:"col h-100"},Co={class:"row"},So={class:"col d-flex justify-content-center"},Bo=Bs(()=>Object(c["g"])("div",null,null,-1)),Eo={key:6,class:"container h-100 d-flex flex-column justify-content-between"},zo={class:"banner-top-container w-100"},Io=Bs(()=>Object(c["g"])("div",{class:"d-flex flex-column align-items-center"},[Object(c["g"])("span",{class:"spinner-border text-dark"}),Object(c["g"])("p",{class:"m-3"},"Recommencement")],-1)),Ao=Bs(()=>Object(c["g"])("div",null,null,-1)),No={key:7,class:"container h-100 d-flex flex-column justify-content-between"},Jo={class:"banner-top-container w-100"},$o={class:"d-flex flex-column align-items-center"},qo=Bs(()=>Object(c["g"])("p",{class:"m-3"},"Partie annulée",-1)),To=Object(c["h"])("Accueil"),Vo=Bs(()=>Object(c["g"])("div",null,null,-1));function Po(e,t,s,o,n,i){const a=Object(c["B"])("BannerTop"),l=Object(c["B"])("router-link"),r=Object(c["B"])("Arrow"),_=Object(c["B"])("BoardExtend"),d=Object(c["B"])("ButtonConfig"),b=Object(c["B"])("ButtonChat");return"hostclient"==n.mode?(Object(c["u"])(),Object(c["f"])("div",Es,[Object(c["g"])("div",zs,[Object(c["i"])(a,{title:n.title_mode},null,8,["title"])]),Object(c["g"])("div",Is,[Object(c["g"])("div",As,[Object(c["g"])("button",{class:"btn btn-block btn-dark my-3",onClick:t[0]||(t[0]=e=>n.mode="client")},$s),Object(c["g"])("button",{class:"btn btn-block btn-dark my-3",onClick:t[1]||(t[1]=e=>n.mode="host")},Vs),Object(c["i"])(l,{to:"/",class:"btn btn-block btn-dark my-3"},{default:Object(c["I"])(()=>[Ps,Ls]),_:1})])])])):"host_wait"==n.mode?(Object(c["u"])(),Object(c["f"])("div",Rs,[Object(c["g"])("div",Ms,[Object(c["i"])(a,{title:n.title_mode},null,8,["title"])]),Object(c["g"])("div",null,[Object(c["g"])("ul",Us,[Object(c["g"])("li",null,[Ks,Object(c["h"])(Object(c["E"])(n.player_name),1)]),Object(c["g"])("li",null,[Gs,Object(c["h"])(Object(c["E"])("me"==n.p_start?"Vous":"L'adversaire"),1)]),Object(c["g"])("li",null,[Qs,Object(c["h"])(Object(c["E"])("clock"==n.p_start_c?"sens horaire":"sens antihoraire"),1)]),Object(c["g"])("li",null,[Ds,Object(c["h"])(Object(c["E"])(i.move_speed_trad),1)]),"created"==n.host_wait_state?(Object(c["u"])(),Object(c["f"])("li",Hs,[Ws,Object(c["h"])(Object(c["E"])(n.game_code),1)])):Object(c["e"])("",!0)]),"created"!=n.host_wait_state||n.code_copied?Object(c["e"])("",!0):(Object(c["u"])(),Object(c["f"])("button",{key:0,class:"btn btn-sm btn-dark my-1",onClick:t[2]||(t[2]=e=>i.copy_code())},Ys)),"created"==n.host_wait_state&&n.code_copied?(Object(c["u"])(),Object(c["f"])("button",Zs,sc)):Object(c["e"])("",!0)]),"wait"==n.host_wait_state?(Object(c["u"])(),Object(c["f"])("p",cc,"Création de la partie en cours")):"disconnected"==n.host_wait_state?(Object(c["u"])(),Object(c["f"])("p",oc,"Vous êtes déconnecté du serveur")):Object(c["e"])("",!0),"created"==n.host_wait_state?(Object(c["u"])(),Object(c["f"])("div",nc,[ic,(Object(c["u"])(!0),Object(c["f"])(c["a"],null,Object(c["A"])(n.waiting_clients,(e,t)=>(Object(c["u"])(),Object(c["f"])("div",{key:t,class:"my-2 d-flex justify-content-between"},[Object(c["g"])("p",ac,Object(c["E"])(e.username),1),Object(c["g"])("div",null,[n.has_accepted_client?t==n.other_sid?(Object(c["u"])(),Object(c["f"])("button",rc,dc)):t!=n.other_sid?(Object(c["u"])(),Object(c["f"])("button",bc,"Accepter")):Object(c["e"])("",!0):(Object(c["u"])(),Object(c["f"])("button",{key:0,class:"btn btn-sm btn-outline-dark ml-2",onClick:e=>i.accept_client(t)},"Accepter",8,lc))])]))),128))])):Object(c["e"])("",!0),Object(c["g"])("div",pc,[Object(c["g"])("button",{class:"btn btn-dark",onClick:t[3]||(t[3]=e=>i.click_host_wait_to_host())},"Annuler")])])):"client"==n.mode?(Object(c["u"])(),Object(c["f"])("div",mc,[Object(c["g"])("div",hc,[Object(c["i"])(a,{title:n.title_mode},null,8,["title"])]),uc,Object(c["g"])("div",jc,[Object(c["g"])("div",Oc,[Object(c["g"])("div",gc,[fc,Object(c["J"])(Object(c["g"])("input",{type:"text",class:"form-control",id:"code_input",autocomplete:"off","onUpdate:modelValue":t[4]||(t[4]=e=>n.client_game_code=e)},null,512),[[c["G"],n.client_game_code]]),n.error_msg_code?(Object(c["u"])(),Object(c["f"])("p",kc,Object(c["E"])(n.error_msg_code),1)):Object(c["e"])("",!0)]),Object(c["g"])("div",yc,[vc,Object(c["J"])(Object(c["g"])("input",{type:"text",class:"form-control",id:"player_name",autocomplete:"off","onUpdate:modelValue":t[5]||(t[5]=e=>n.player_name=e)},null,512),[[c["G"],n.player_name]]),n.error_msg_username?(Object(c["u"])(),Object(c["f"])("p",wc,Object(c["E"])(n.error_msg_username),1)):Object(c["e"])("",!0)]),Object(c["g"])("div",xc,[Object(c["g"])("button",{class:"btn btn-block btn-dark",onClick:t[6]||(t[6]=e=>i.click_wait_client())},"Confirmer"),Object(c["g"])("button",{class:"btn btn-block btn-dark",onClick:t[7]||(t[7]=e=>n.mode="hostclient")},"Retour")])])])])):"client_wait"==n.mode?(Object(c["u"])(),Object(c["f"])("div",Cc,[Object(c["g"])("div",Sc,[Object(c["i"])(a,{title:n.title_mode},null,8,["title"])]),Object(c["g"])("div",null,[Object(c["g"])("ul",Bc,[Object(c["g"])("li",null,[Ec,Object(c["h"])(Object(c["E"])(n.player_name),1)]),Object(c["g"])("li",null,[zc,Object(c["h"])(Object(c["E"])(n.client_game_code),1)])])]),"wait"==n.client_wait_state?(Object(c["u"])(),Object(c["f"])("p",Ic,"Demande d'entrée dans la partie en cours")):"joined"==n.client_wait_state?(Object(c["u"])(),Object(c["f"])("p",Ac,[Nc,Object(c["g"])("span",Jc,Object(c["E"])(n.other_player_name),1),$c])):"no_room"==n.client_wait_state?(Object(c["u"])(),Object(c["f"])("p",qc,"Aucune partie ne correspond au code")):"host_quit"==n.client_wait_state?(Object(c["u"])(),Object(c["f"])("p",Tc,[Vc,Object(c["g"])("span",Pc,Object(c["E"])(n.other_player_name),1),Lc])):"disconnected"==n.client_wait_state?(Object(c["u"])(),Object(c["f"])("p",Rc,"Vous êtes déconnecté du serveur")):"host_refuse"==n.client_wait_state?(Object(c["u"])(),Object(c["f"])("p",Mc,[Uc,Object(c["g"])("span",Kc,Object(c["E"])(n.other_player_name),1),Gc])):Object(c["e"])("",!0),Object(c["g"])("div",Qc,[Object(c["g"])("button",{class:"btn btn-dark",onClick:t[8]||(t[8]=e=>i.click_client_wait_to_client())},"Annuler")])])):"host"==n.mode?(Object(c["u"])(),Object(c["f"])("div",Dc,[Object(c["g"])("div",Hc,[Object(c["i"])(a,{title:n.title_mode},null,8,["title"])]),Wc,Object(c["g"])("div",Fc,[Object(c["g"])("div",Xc,[Object(c["g"])("div",Yc,[Zc,Object(c["J"])(Object(c["g"])("input",{type:"text",class:"form-control",id:"player_name",autocomplete:"off","onUpdate:modelValue":t[9]||(t[9]=e=>n.player_name=e)},null,512),[[c["G"],n.player_name]]),n.error_msg_username?(Object(c["u"])(),Object(c["f"])("p",eo,Object(c["E"])(n.error_msg_username),1)):Object(c["e"])("",!0)])]),Object(c["g"])("div",to,[so,Object(c["g"])("div",co,[Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn btn-sm",{"btn-dark":"me"==n.p_start,"btn-outline-dark":"me"!=n.p_start}]),onClick:t[10]||(t[10]=e=>i.click_p_start("me"))},"Vous",2),Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn btn-sm",{"btn-dark":"opp"==n.p_start,"btn-outline-dark":"opp"!=n.p_start}]),onClick:t[11]||(t[11]=e=>i.click_p_start("opp"))},"L'adversaire",2)])]),Object(c["g"])("div",oo,[no,Object(c["g"])("div",io,[Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn btn-sm",{"btn-dark":"clock"==n.p_start_c,"btn-outline-dark":"clock"!=n.p_start_c}]),onClick:t[12]||(t[12]=e=>i.click_p_start_c("clock"))},[Object(c["i"])(r),ao],2),Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn btn-sm",{"btn-dark":"c-clock"==n.p_start_c,"btn-outline-dark":"c-clock"!=n.p_start_c}]),onClick:t[13]||(t[13]=e=>i.click_p_start_c("c-clock"))},[Object(c["i"])(r,{is_clockwise:!1}),lo],2)])]),Object(c["g"])("div",ro,[_o,Object(c["g"])("div",bo,[Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn btn-sm",{"btn-dark":"slow"==n.move_speed,"btn-outline-dark":"slow"!=n.move_speed}]),onClick:t[14]||(t[14]=e=>i.click_speed("slow"))},"Lente",2),Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn btn-sm",{"btn-dark":"normal"==n.move_speed,"btn-outline-dark":"normal"!=n.move_speed}]),onClick:t[15]||(t[15]=e=>i.click_speed("normal"))},"Moyenne",2),Object(c["g"])("button",{type:"button",class:Object(c["p"])(["btn btn-sm",{"btn-dark":"fast"==n.move_speed,"btn-outline-dark":"fast"!=n.move_speed}]),onClick:t[16]||(t[16]=e=>i.click_speed("fast"))},"Rapide",2)])]),Object(c["g"])("div",po,[Object(c["g"])("button",{class:"btn btn-sm btn-block btn-outline-dark",onClick:t[17]||(t[17]=e=>i.click_wait_host())},uo),Object(c["g"])("button",{class:"btn btn-sm btn-block btn-outline-dark",onClick:t[18]||(t[18]=e=>n.mode="hostclient")},go)])]),fo])):"game"==n.mode?(Object(c["u"])(),Object(c["f"])("div",ko,[Object(c["g"])("div",yo,[Object(c["i"])(a,{title:n.title_mode},null,8,["title"])]),Object(c["g"])("div",vo,[Object(c["g"])("div",wo,[Object(c["g"])("div",xo,[Object(c["i"])(_,{speed_timer:n.speed_timer,p_start:n.p_start,p_start_c:n.p_start_c,opp_name:n.other_player_name,me_name:n.player_name,mode:"online",other_sid:n.other_sid,socket:n.socket,game_code:n.game_code,onTurn:i.update_turn,sid:n.sid,is_host:n.i_am_host},null,8,["speed_timer","p_start","p_start_c","opp_name","me_name","other_sid","socket","game_code","onTurn","sid","is_host"])])])]),Object(c["g"])("div",Co,[Object(c["g"])("div",So,[Object(c["i"])(d,{onSpeed:i.update_speed,onRetry:i.retry_game,speed:n.move_speed,mode:"online",is_host:n.i_am_host,turn:n.whose_turn,p_start:n.p_start,p_start_c:n.p_start_c,onUpdate_p_c:i.update_p_start_and_c},null,8,["onSpeed","onRetry","speed","is_host","turn","p_start","p_start_c","onUpdate_p_c"]),Object(c["i"])(b,{messages:n.chat_messages,opp_name:n.other_player_name,my_name:n.player_name,onChat:i.send_message,nb_unseen_notif:n.chat_messages.length-n.nb_seen_notif,onOpen_modal:i.open_chat_modal},null,8,["messages","opp_name","my_name","onChat","nb_unseen_notif","onOpen_modal"])])]),Bo])):"restarting"==n.mode?(Object(c["u"])(),Object(c["f"])("div",Eo,[Object(c["g"])("div",zo,[Object(c["i"])(a,{title:n.title_mode},null,8,["title"])]),Io,Ao])):"restarting_failed"==n.mode?(Object(c["u"])(),Object(c["f"])("div",No,[Object(c["g"])("div",Jo,[Object(c["i"])(a,{title:n.title_mode},null,8,["title"])]),Object(c["g"])("div",$o,[qo,Object(c["i"])(l,{to:"/",class:"btn btn-block btn-dark my-3"},{default:Object(c["I"])(()=>[To]),_:1})]),Vo])):Object(c["e"])("",!0)}const Lo=e=>(Object(c["x"])("data-v-8ea5e6f6"),e=e(),Object(c["v"])(),e),Ro=Lo(()=>Object(c["g"])("i",{class:"bi bi-chat-fill"},null,-1)),Mo=Object(c["h"])(" Chat "),Uo={key:0,class:"badge badge-danger"},Ko={class:"modal fade",id:"chat-modal",tabindex:"-1",role:"dialog","aria-labelledby":"chat-modal-title","aria-hidden":"true",ref:"chat_modal"},Go={class:"modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable",role:"document",id:"chat-modal-dialog"},Qo={class:"modal-content"},Do=Lo(()=>Object(c["g"])("div",{class:"modal-header"},[Object(c["g"])("h5",{class:"modal-title"},"Chat"),Object(c["g"])("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[Object(c["g"])("span",{"aria-hidden":"true"},"×")])],-1)),Ho={class:"modal-body p-0",id:"modal-body-chat"},Wo={class:"p-1 content-notification"},Fo={key:0,class:""},Xo=Lo(()=>Object(c["g"])("p",{class:"m-5 text-center font-italic"}," Le vide intersidéral... ",-1)),Yo=[Xo],Zo={class:""},en={key:1,class:"d-flex justify-content-center"},tn={class:"m-2 font-italic text-danger text-center"},sn={key:2,class:"d-flex justify-content-center"},cn={class:"m-2 font-italic text-success text-center"},on={key:3,class:"d-flex justify-content-center bg-dark"},nn={class:"m-2 font-italic text-warning text-center"},an={class:"modal-footer bg-info p-0"},ln={class:"w-100"},rn={class:"input-group input-group-sm"},_n=Lo(()=>Object(c["g"])("i",{class:"fa-solid fa-rocket"},null,-1)),dn=[_n];function bn(e,t,s,o,n,i){return Object(c["u"])(),Object(c["f"])(c["a"],null,[Object(c["g"])("button",{class:"btn btn-sm btn-info mx-2","data-toggle":"modal","data-target":"#chat-modal",ref:"btn_chat",onClick:t[0]||(t[0]=e=>i.open_chat())},[Ro,Mo,s.nb_unseen_notif>0?(Object(c["u"])(),Object(c["f"])("span",Uo,Object(c["E"])(s.nb_unseen_notif),1)):Object(c["e"])("",!0)],512),Object(c["g"])("div",Ko,[Object(c["g"])("div",Go,[Object(c["g"])("div",Qo,[Do,Object(c["g"])("div",Ho,[Object(c["g"])("div",Wo,[0==s.messages.length?(Object(c["u"])(),Object(c["f"])("div",Fo,Yo)):Object(c["e"])("",!0),(Object(c["u"])(!0),Object(c["f"])(c["a"],null,Object(c["A"])(s.messages,(e,t)=>(Object(c["u"])(),Object(c["f"])("div",{key:t},["mess"==e.type?(Object(c["u"])(),Object(c["f"])("div",{key:0,class:Object(c["p"])({"message-not-sent":"me"==e.who&&!e.sent})},[Object(c["g"])("span",{class:Object(c["p"])({"text-info":"me"==e.who})},[Object(c["g"])("strong",null,Object(c["E"])("me"==e.who?s.my_name+" (Vous)":s.opp_name)+" : ",1)],2),Object(c["g"])("span",Zo,Object(c["E"])(e.value),1)],2)):"disco"==e.type?(Object(c["u"])(),Object(c["f"])("div",en,[Object(c["g"])("span",tn,Object(c["E"])("me"==e.who?"Vous vous êtes déconnecté":s.opp_name+" s'est déconnecté"),1)])):"reco"==e.type?(Object(c["u"])(),Object(c["f"])("div",sn,[Object(c["g"])("span",cn,Object(c["E"])("me"==e.who?"Vous vous êtes reconnecté":s.opp_name+" s'est reconnecté"),1)])):"warn"==e.type?(Object(c["u"])(),Object(c["f"])("div",on,[Object(c["g"])("span",nn,Object(c["E"])(e.value),1)])):Object(c["e"])("",!0)]))),128))])]),Object(c["g"])("div",an,[Object(c["g"])("div",ln,[Object(c["g"])("div",rn,[Object(c["J"])(Object(c["g"])("input",{type:"text",class:"form-control",placeholder:"Votre message...",autocomplete:"off","onUpdate:modelValue":t[1]||(t[1]=e=>n.message_to_send=e),onKeyup:t[2]||(t[2]=Object(c["K"])(e=>i.send_message(),["enter"]))},null,544),[[c["G"],n.message_to_send]]),Object(c["g"])("button",{class:"btn btn-sm btn-dark",type:"button",onClick:t[3]||(t[3]=e=>i.send_message())},dn)])])])])])],512)],64)}var pn={components:{},props:{messages:{default:[]},opp_name:{type:String,default:"Joueur"},my_name:{type:String,default:"Joueur"},nb_unseen_notif:{type:Number,default:0}},emits:["chat","open_modal"],data(){return{message_to_send:""}},computed:{},methods:{send_message(){let e=this.message_to_send.trim();if(this.message_to_send=e,e)if(e.length<=1e3){this.message_to_send="";let t={message:e};this.$emit("chat",t)}else alert("Message trop long. 1000 caractères max.")},make_scroll_bottom(){var e=document.getElementById("modal-body-chat");setTimeout((function(){let t=e.scrollHeight;0==t&&(t=999999999),xe()("#modal-body-chat").animate({scrollTop:t},"fast")}),300)},open_chat(){this.make_scroll_bottom(),this.$emit("open_modal")},close_modal(){document.querySelectorAll(".modal.show#chat-modal").length>0&&this.$refs.btn_chat.click()},before_window_unload(e){e.preventDefault();let t="Vous êtes sur le point de quitter cette partie";return e.returnValue=t,t}},created(){window.addEventListener("beforeunload",this.before_window_unload)},mounted(){xe()("#chat-modal").on("shown.bs.modal",(function(e){console.log("Alefa barea",e)}))},beforeUnmount(){window.removeEventListener("beforeunload",this.before_window_unload),this.close_modal()}};s("522d");const mn=g()(pn,[["render",bn],["__scopeId","data-v-8ea5e6f6"]]);var hn=mn,un=s("daa8"),jn={components:{BoardExtend:Nt,BannerTop:Rt,ButtonConfig:ws,ButtonChat:hn,Arrow:St},data(){return{speed_timer:400,move_speed:"normal",mode:"hostclient",p_start:"me",p_start_c:"clock",title_mode:"Multijoueur en ligne",player_name:"Joueur",socket:null,error_msg_username:"",game_code:null,client_game_code:"",error_msg_code:"",waiting_clients:{},sid:null,client_wait_state:"wait",host_wait_state:"wait",other_sid:null,other_player_name:"Joueur",connected_to_server:!1,code_copied:!1,timer_copy_code:null,has_accepted_client:!1,i_am_client:!1,i_am_host:!1,whose_turn:"none",sid_game:null,chat_messages:[],nb_seen_notif:0}},computed:{move_speed_trad(){return"normal"==this.move_speed?"moyenne":"slow"==this.move_speed?"lente":"fast"==this.move_speed?"rapide":""}},methods:{update_p_start_and_c(e){this.p_start=e.p_s,this.p_start_c=e.p_s_c},open_chat_modal(){this.nb_seen_notif=this.chat_messages.length},is_chat_scroll_bottom(){let e=xe()("#modal-body-chat"),t=document.getElementById("modal-body-chat"),s=e.height(),c=!1;return t.scrollTop+s==t.scrollHeight&&(c=!0),c},make_chat_scroll_bottom(){var e=document.getElementById("modal-body-chat");xe()("#modal-body-chat").animate({scrollTop:e.scrollHeight},"slow"),document.querySelectorAll(".modal.show#chat-modal").length>0&&(this.nb_seen_notif=this.chat_messages.length)},send_message(e){let t=this.chat_messages.length;this.chat_messages.push({type:"mess",who:"me",sent:!1,value:e.message}),this.make_chat_scroll_bottom(),this.nb_seen_notif=this.chat_messages.length,this.socket.emit("send_message",JSON.stringify({game_code:this.game_code,to:this.other_sid,from:this.sid_game,message:e.message,index:t,timestamp:(new Date).getTime(),is_host:this.i_am_host}))},update_turn(e){this.whose_turn=e},accept_client(e){this.other_sid=e,this.other_player_name=this.waiting_clients[e]["username"],this.has_accepted_client=!0;let t={game_code:this.game_code,client_sid:e,who_starts:"me"==this.p_start?"opp":"me",clock_start:this.p_start_c,speed_timer:this.speed_timer,client_token:this.waiting_clients[e]["token"],host_token:this.$store.state.token,host_name:this.player_name,client_name:this.other_player_name};this.socket.emit("accept_client",JSON.stringify(t))},make_code_copied_false_in_moment(){this.timer_copy_code=setTimeout(function(){this.code_copied=!1}.bind(this),2e3)},copy_code(){if(this.code_copied=!0,this.make_code_copied_false_in_moment(),navigator.clipboard)navigator.clipboard.writeText(this.game_code);else{const t=document.createElement("textarea");t.value=this.game_code,t.style.position="absolute",t.style.opacity=0,document.body.prepend(t),t.select();try{document.execCommand("copy")}catch(e){console.error(e)}finally{t.remove()}}},update_speed(e){this.speed_timer=e;let t=400;400==e?t="normal":1200==e?t="slow":90==e&&(t="fast"),this.move_speed=t},click_p_start(e){this.p_start=e},click_p_start_c(e){this.p_start_c=e},start_game(){this.mode="game"},retry_game(e){if(e){this.mode="restarting";let e={to:this.other_sid,game_code:this.game_code,p_start:"me"==this.p_start?"opp":"me",p_start_c:this.p_start_c};this.socket.emit("restart",JSON.stringify(e))}},click_speed(e){this.move_speed=e;let t=400;"normal"==e?t=400:"slow"==e?t=1200:"fast"==e&&(t=90),this.speed_timer=t},check_player_name(){return this.player_name=this.player_name.trim(),this.error_msg_username="",!(!this.player_name||this.player_name.length>20)||(this.error_msg_username="Pseudo entre 1 et 20 caractères",!1)},check_game_code(){return this.client_game_code=this.client_game_code.trim().toUpperCase(),this.error_msg_code="",6==this.client_game_code.length||(this.error_msg_code="Code invalide",!1)},generate_game_code(){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",s=t.length;for(let c=0;c<6;c++){const c=Math.floor(Math.random()*s);e+=t.charAt(c)}return e},click_wait_host(){if(this.check_player_name()){this.mode="host_wait",this.i_am_client=!1,this.i_am_host=!0,this.waiting_clients={},this.host_wait_state="wait",this.has_accepted_client=!1,this.connected_to_server||(this.host_wait_state="disconnected"),this.game_code=this.generate_game_code();let e={token:this.$store.state.token,game_code:this.game_code,create:!0,username:this.player_name};this.socket.emit("join",JSON.stringify(e))}},click_host_wait_to_host(){this.mode="host";let e={};this.socket.emit("leave",JSON.stringify(e))},click_client_wait_to_client(){this.mode="client";let e={};this.socket.emit("leave",JSON.stringify(e))},click_wait_client(){if(this.check_player_name()&&this.check_game_code()){this.mode="client_wait",this.i_am_client=!0,this.i_am_host=!1,this.client_wait_state="wait",this.connected_to_server||(this.client_wait_state="disconnected");let e={token:this.$store.state.token,game_code:this.client_game_code,create:!1,username:this.player_name};this.socket.emit("join",JSON.stringify(e))}},handle_message(e){if(e=JSON.parse(e),"on_connect"==e.type)this.sid=e.sid;else if("response_create_game"==e.type)e.success&&(this.host_wait_state="created");else if("response_join_game"==e.type)"host_wait"==this.mode?this.waiting_clients[e.sid]={username:e.username,token:e.token}:"client_wait"==this.mode&&("no_room"==e.msg?this.client_wait_state="no_room":"room_exists"==e.msg&&(this.other_sid=e.host_sid,this.other_player_name=e.host_username,this.client_wait_state="joined"));else if("leave_room"==e.type)"host_wait"==this.mode?delete this.waiting_clients[e.sid]:"client_wait"==this.mode&&e.sid==this.other_sid&&(this.client_wait_state="host_quit");else if("accept_client"==e.type){this.game_code="client_wait"==this.mode?this.client_game_code:this.game_code;let t={emit_leave_room:!1,game_code:this.game_code};this.socket.emit("leave",JSON.stringify(t)),"client_wait"==this.mode?e.sid==this.sid?(this.p_start=e.who_starts,this.p_start_c=e.clock_start,this.speed_timer=e.speed_timer,this.update_speed(this.speed_timer),this.sid_game=e.sid,this.chat_messages=[],this.nb_seen_notif=0,this.mode="game"):this.client_wait_state="host_refuse":"host_wait"==this.mode&&(this.sid_game=e.host_sid,this.chat_messages=[],this.nb_seen_notif=0,this.mode="game")}else if("move_pebbles"==e.type)this.speed_timer=e.speed,this.update_speed(this.speed_timer);else if("restart_request"==e.type){this.mode="restarting",this.p_start=e.p_start,this.p_start_c=e.p_start_c;let t={game_code:this.game_code,to:this.other_sid};this.socket.emit("restart_ok",JSON.stringify(t))}else if("restart_ok"==e.type)this.mode="game";else if("restart_no_game"==e.type)this.mode="restarting_failed";else if("message_sent"==e.type)this.chat_messages.length>e.index&&"mess"==this.chat_messages[e.index].type&&"me"==this.chat_messages[e.index].who&&(this.chat_messages[e.index].sent=!0);else if("receive_message"==e.type){let t=this.is_chat_scroll_bottom();this.chat_messages.push({type:"mess",who:"opp",sent:!0,value:e.message}),t&&this.make_chat_scroll_bottom()}else if("opp_disconnected"==e.type){let e=this.is_chat_scroll_bottom();this.chat_messages.push({type:"disco",who:"opp"}),e&&this.make_chat_scroll_bottom()}else if("opp_reconnected"==e.type){let e=this.is_chat_scroll_bottom();this.chat_messages.push({type:"reco",who:"opp"}),e&&this.make_chat_scroll_bottom()}else if("reconnect_no_game"==e.type){let e=this.is_chat_scroll_bottom();this.chat_messages.push({type:"warn",value:"La partie n'existe plus. Veuillez créer une nouvelle partie ou en rejoindre une autre."}),e&&this.make_chat_scroll_bottom()}},handle_disconnect(){if(this.connected_to_server=!1,this.host_wait_state="disconnected",this.client_wait_state="disconnected","restarting"==this.mode)this.mode="hostclient";else if("game"==this.mode){let e=this.is_chat_scroll_bottom();this.chat_messages.push({type:"disco",who:"me"}),e&&this.make_chat_scroll_bottom()}},handle_connect(){if(this.connected_to_server=!0,"game"==this.mode){let e={game_code:this.game_code,sid:this.sid_game,is_host:this.i_am_host};this.socket.emit("reconnect_game",JSON.stringify(e));let t=this.is_chat_scroll_bottom();this.chat_messages.push({type:"reco",who:"me"}),t&&this.make_chat_scroll_bottom()}}},mounted(){},beforeUnmount(){this.socket&&this.socket.disconnect()},created(){this.socket=Object(un["a"])(this.$store.state.url_b),this.socket.on("connect",()=>{this.handle_connect()}),this.socket.on("disconnect",()=>{this.handle_disconnect()}),this.socket.on("error",e=>{console.error("Erreur Socket.IO : ",e)}),this.socket.on("message",this.handle_message)}};s("7df4");const On=g()(jn,[["render",Po],["__scopeId","data-v-f29dc626"]]);var gn=On,fn=[{path:"/game/computer",name:"GameComputer",component:Ie},{path:"/game/local",name:"GameLocal",component:Ss},{path:"/game/online",name:"GameOnline",component:gn}],kn=fn,yn=[];yn=yn.concat(U,kn);const vn=Object(x["a"])({history:Object(x["b"])("/katro/"),routes:yn});var wn=vn,xn=s("5502"),Cn=Object(xn["a"])({state:{token:"loading",url_b:"https://boggy-candy-spoon.glitch.me",is_in_game:!1},mutations:{SET_TOKEN(e,t){e.token=t},SET_IS_IN_GAME(e,t){e.is_in_game=t}},actions:{set_token(e,t){e.commit("SET_TOKEN",t)},set_is_in_game(e,t){e.commit("SET_IS_IN_GAME",t)}},modules:{}});const Sn=Object(c["c"])(w).use(Cn);d["a"].defaults.headers={"Access-Control-Allow-Origin":"*"},Sn.use(wn).mount("#app")},6182:function(e,t,s){},"663f":function(e,t,s){},"667f":function(e,t,s){"use strict";s("6182")},"6c70":function(e,t,s){},"7c15":function(e,t,s){"use strict";s("98db")},"7df4":function(e,t,s){"use strict";s("4727")},"8ae6":function(e,t,s){"use strict";s("ecb2")},"98db":function(e,t,s){},adc8:function(e,t,s){},ae3c:function(e,t,s){"use strict";s("b581")},b581:function(e,t,s){},b945:function(e,t,s){},d140:function(e,t,s){"use strict";s("adc8")},dd0b:function(e,t,s){"use strict";s("2b07")},eb19:function(e,t,s){},ecb2:function(e,t,s){}});
//# sourceMappingURL=app.8130e291.js.map